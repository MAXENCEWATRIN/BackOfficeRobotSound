<!doctype html>
<html lang="fr">
    <head>
        <meta charset="utf-8">
        <title>Titre de la page</title>

        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
        <!-- development version, includes helpful console warnings -->
        <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

    </head>
    <body>
        <div class="container-fluid" id="robotSoundApp">



            <div class="row">
                <div class="col-8" style="height:60vh;position:relative;">
                    ma vidéo
                    {{ preference }}
                    <div class="form-group" style="transform:rotate(90deg);position:absolute;left:0;">
                        <label for="slider-left">Example Range input  {{ preference.sliderLeft }}</label>
                        <input type="range" class="form-control-range" max="1000" v-model="preference.sliderLeft" id="slider-left">
                    </div>
                    <div class="form-group">
                        <label for="slider-right">Example Range input right {{ preference.sliderRight }}</label>
                        <input type="range" class="form-control-range" v-model="preference.sliderRight" id="slider-right">
                    </div>

                </div>
                <div class="col-4"> 
                    <h4 class="text-left">ajouter un musicien :</h4>
                    {{ musician }}
                    <form id="musician-form" @submit.prevent="editMusician"  role="form">

                        <div class="form-group">
                            <label for="name" class="control-label">Nom :</label>
                            <input type="text" id="name" v-model="musician.name" class="form-control" placeholder="Entrez votre nom d'artiste" required="true"/>
                        </div>

                        <div class="input-group">
                            <label for="image" class="control-label">Image :</label>
                            <input type="file" id="image" class="form-control"/>
                            <!--<img src="musician.image">-->
                        </div>


                        <div class="input-group">
                            <label for="laser" class="control-label">Laser :</label>
                            <input type="checkbox" v-model="musician.laser" @/>
                        </div>

                        <div class="form-group">
                            <input type="submit" class="btn btn-primary" />
                        </div>
                    </form>

                </div>

            </div>





            <div class="row">
                <div class="col-6">
                    <div class="table-responsive">
                        <h4 class="text-left">Liste des musiciens</h4>
                        <table class="table">
                            <caption>Liste des musiciens</caption>
                            <thead>
                                <tr>
                                    <th scope="col">#</th>
                                    <th scope="col">Nom</th>
                                    <th scope="col">Image</th>
                                    <th scope="col">Laser</th>
                                    <th colspan="3">Gestions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="musician in musicians">
                                    <th scope="row">{{ musician.idMusician }}</th>
                                    <td>{{ musician.name }}</td>
                                    <td>{{ musician.image }}</td>
                                    <td>{{ musician.laser }}</td>
                                    <td colspan="3">
                                        <button class="btn btn-danger"  v-on:click="deleteMusician(musician.idMusician)">delete</button>
                                        <button class="btn btn-warning" v-on:click="updateMusician(musician)">Update</button>
                                        <button class="btn btn-primary" v-on:click="selectMusician(musician)">Préférences</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="col-6">
                    <div class="table-responsive">
                        <h4 class="text-left">Liste des préférences {{ musician.name }}</h4>
                        <table class="table">
                            <caption>Liste des musiciens</caption>
                            <thead>
                                <tr>
                                    <th scope="col">n°</th>
                                    <th scope="col">Nom</th>
                                    <th scope="col">Pochette</th>
                                    <th scope="col">Gestion</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <th scope="row">1</th>
                                    <td>SUM41</td>
                                    <td>Otto</td>
                                    <td><input type="submit" value="Suprimmer" class="btn btn-outline-secondary" /></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>



        <!--    
          <div class="container">
            <h1>Robot Sound</h1>
        
            <div id="musician">
              <pre>
                {{error}}
              </pre>
              {{ musician }}
              <form method="post" @submit.prevent="editMusician">
                <input type="hidden" v-model="musician.idMusician">
                <div class="form-group">
                  <label for="name-musicien">Nom du musicien *</label>
                  <input v-model="musician.name" type="text" class="form-control" id="name-musicien" required placeholder="Insérer le nom du musicien ici">
                </div>
                <div class="form-group">
                  <label for="image-musician">Image du Musicien</label>
                  <input type="file" class="form-control-file" id="image-musician">
                </div>
                <div class="form-check">
                  <input v-model="musician.laser" class="form-check-input" :checked="musician.laser" type="checkbox" name="laser-musicien" id="laser-musicien">
                  <label class="form-check-label" for="laser-musicien">Laser</label>
                </div>
                <br>
                <button type="submit" class="btn btn-primary">Submit</button>
              </form>
        
        
        
              <table class="table">
                <thead>
                  <tr>
                    <th scope="col">#</th>
                    <th scope="col">Name</th>
                    <th scope="col">Image</th>
                    <th scope="col">Laser</th>
                    <th colspan="3">Gestion</th>
                  </tr>
                </thead>
                <tbody>
                  <tr v-for="musician in musicians">
                    <th scope="row">  {{ musician.idMusician }}</th>
                    <td>  {{ musician.name }}</td>
                    <td>  {{ musician.image }}</td>
                    <td>  {{ musician.laser }}</td>
                    <td colspan="3">
                      <button type="button" class="btn btn-primary">Préference</button>
                      <button type="button" class="btn btn-danger" v-on:click="deleteMusician(musician.idMusician)">Delete</button>
                      <button type="button" class="btn btn-warning" v-on:click="updateMusician(musician)">Update</button>
                    </td>
                  </tr>
                </tbody>
              </table>
        
            </div>
          </div>-->


        <script type="text/javascript">

var URL = "http://localhost:8080/BackOfficeRobotSound/rest";
var URL_MUSICIAN = URL + "/musicians/";
var URL_PREFERENCE = URL + "/preferences/";

var robotSoundApp = new Vue({
    el: '#robotSoundApp',
    data: {
        musicians: [],
        preferences: [],
        error: '',
        message: '',
        musician: {},
        preference: {
            sliderRight: 0,
            sliderLeft: 0
        },

    },
    mounted() {
        this.getMusicians()
    },
    methods: {
        updateMusician(musician) {
            this.musician = musician
        },
        selectMusician(musician) {
            this.musician = musician
            this.musician.preferences = musician.preferences
        },
        editMusician() {
            if (this.musician.idMusician) {
                axios.put(URL_MUSICIAN, this.musician)
                        .then(response => (
                                    this.response = response
                                    )
                                    .then(
                                            this.getMusicians()
                                            )
                        ).then(this.musician = {})
                        .catch(error => (
                                    this.error = error
                                    ));
            } else {
                axios.post(URL_MUSICIAN, this.musician)
                        .then(response =>
                            (this.response = response).then(this.musicians = this.getMusicians())
                        ).then(this.musician = {})
                        .catch(error => (
                                    this.error = error
                                    ));
            }
        },
        deleteMusician(idMusician) {
            axios.delete(URL_MUSICIAN + idMusician)
                    .then(response => (this.response = response)
                                .then(this.getMusicians())
                    )
                    .catch(error => (
                                this.error = error
                                ));
        },
        getMusicians() {
            axios.get(URL_MUSICIAN)
                    .then(response =>
                        (this.musicians = response.data)
                    )
                    .catch(error =>
                        (this.error = "Some issues with the server !")
                    )
        }
    }

});








        </script>


    </body>
</html>
